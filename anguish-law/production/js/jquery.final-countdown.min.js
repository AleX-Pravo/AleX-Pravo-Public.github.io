"use strict";!function(i){var c,h,l,u,w,v,b,f,y,_,r,t;function a(){b.draw(),f.draw(),y.draw(),_.draw()}function m(e){return Math.PI/180*90-Math.PI/180*e}i.fn.final_countdown=function(e,o){if((r=i(this)).is(":visible")){var s=i.extend({start:void 0,end:void 0,now:void 0,selectors:{value_seconds:".clock-seconds .val",canvas_seconds:"canvas-seconds",value_minutes:".clock-minutes .val",canvas_minutes:"canvas-minutes",value_hours:".clock-hours .val",canvas_hours:"canvas-hours",value_days:".clock-days .val",canvas_days:"canvas-days"},seconds:{borderColor:"#7995D5",borderWidth:"1"},minutes:{borderColor:"#ACC742",borderWidth:"1"},hours:{borderColor:"#ECEFCB",borderWidth:"1"},days:{borderColor:"#FF9900",borderWidth:"1"}},e);void 0===(c=i.extend({},s,e)).start&&(c.start=r.data("start")),void 0===c.end&&(c.end=r.data("end")),void 0===c.now&&(c.now=r.data("now")),r.data("border-color")&&(c.seconds.borderColor=c.minutes.borderColor=c.hours.borderColor=c.days.borderColor=r.data("border-color")),c.now<c.start&&(c.start=c.now,c.end=c.now),c.now>c.end&&(c.start=c.now,c.end=c.now),"function"==typeof o&&(t=o),i(window).on("load",a),i(window).on("redraw",function(){switched=!1,a()}),i(window).on("resize",a),h={total:Math.floor((c.end-c.start)/86400),days:Math.floor((c.end-c.now)/86400),hours:24-Math.floor((c.end-c.now)%86400/3600),minutes:60-Math.floor((c.end-c.now)%86400%3600/60),seconds:60-Math.floor((c.end-c.now)%86400%3600%60)},function(){var e=i("#"+c.selectors.canvas_seconds).width(),o=new Kinetic.Stage({container:c.selectors.canvas_seconds,width:e,height:e});l=new Kinetic.Shape({drawFunc:function(e){var o=i("#"+c.selectors.canvas_seconds).width(),s=o/2-c.seconds.borderWidth/2,r=o/2,t=o/2;e.beginPath(),e.arc(r,t,s,m(0),m(6*h.seconds)),e.fillStrokeShape(this),i(c.selectors.value_seconds).html(60-h.seconds)},stroke:c.seconds.borderColor,strokeWidth:c.seconds.borderWidth}),(b=new Kinetic.Layer).add(l),o.add(b);var s=i("#"+c.selectors.canvas_minutes).width(),r=new Kinetic.Stage({container:c.selectors.canvas_minutes,width:s,height:s});u=new Kinetic.Shape({drawFunc:function(e){var o=i("#"+c.selectors.canvas_minutes).width(),s=o/2-c.minutes.borderWidth/2,r=o/2,t=o/2;e.beginPath(),e.arc(r,t,s,m(0),m(6*h.minutes)),e.fillStrokeShape(this),i(c.selectors.value_minutes).html(60-h.minutes)},stroke:c.minutes.borderColor,strokeWidth:c.minutes.borderWidth}),(f=new Kinetic.Layer).add(u),r.add(f);var t=i("#"+c.selectors.canvas_hours).width(),a=new Kinetic.Stage({container:c.selectors.canvas_hours,width:t,height:t});w=new Kinetic.Shape({drawFunc:function(e){var o=i("#"+c.selectors.canvas_hours).width(),s=o/2-c.hours.borderWidth/2,r=o/2,t=o/2;e.beginPath(),e.arc(r,t,s,m(0),m(360*h.hours/24)),e.fillStrokeShape(this),i(c.selectors.value_hours).html(24-h.hours)},stroke:c.hours.borderColor,strokeWidth:c.hours.borderWidth}),(y=new Kinetic.Layer).add(w),a.add(y);var n=i("#"+c.selectors.canvas_days).width(),d=new Kinetic.Stage({container:c.selectors.canvas_days,width:n,height:n});v=new Kinetic.Shape({drawFunc:function(e){var o=i("#"+c.selectors.canvas_days).width(),s=o/2-c.days.borderWidth/2,r=o/2,t=o/2;e.beginPath(),0==h.total?e.arc(r,t,s,m(0),m(360)):e.arc(r,t,s,m(0),m(360/h.total*(h.total-h.days))),e.fillStrokeShape(this),i(c.selectors.value_days).html(h.days)},stroke:c.days.borderColor,strokeWidth:c.days.borderWidth}),(_=new Kinetic.Layer).add(v),d.add(_)}(),function(){var e=setInterval(function(){if(59<h.seconds){if(60-h.minutes==0&&24-h.hours==0&&0==h.days)return clearInterval(e),void(void 0!==t&&t.call(this));h.seconds=1,59<h.minutes?(h.minutes=1,f.draw(),23<h.hours?(h.hours=1,0<h.days&&(h.days--,_.draw())):h.hours++,y.draw()):h.minutes++,f.draw()}else h.seconds++;b.draw()},1e3)}()}}}(jQuery);