!function(e,t){"use strict";function s(t){t=e.extend({},W,t||{}),null===E&&(E=e("body"));for(var s=e(this),r=0,a=s.length;r<a;r++)l(s.eq(r),t);return s}function l(t,s){if(!t.hasClass("selecter-element")){(s=e.extend({},s,t.data("selecter-options"))).multiple=t.prop("multiple"),s.disabled=t.is(":disabled"),s.external&&(s.links=!0);var l=t.find("[selected]").not(":disabled"),o=t.find("option").index(l);s.multiple||""===s.label?s.label="":(t.prepend('<option value="" class="selecter-placeholder" selected>'+s.label+"</option>"),o>-1&&o++);var i=t.find("option, optgroup"),c=i.filter("option");l.length||(l=c.eq(0));var d=o>-1?o:0,h=""!==s.label?s.label:l.text();s.tabIndex=t[0].tabIndex,t[0].tabIndex=-1;var b="",g="";g+='<div class="selecter '+s.customClass,q?g+=" mobile":s.cover&&(g+=" cover"),s.multiple?g+=" multiple":g+=" closed",s.disabled&&(g+=" disabled"),g+='" tabindex="'+s.tabIndex+'">',g+="</div>",s.multiple||(b+='<span class="selecter-selected">',b+=e("<span></span>").text(x(h,s.trim)).html(),b+="</span>"),b+='<div class="selecter-options">',b+="</div>",t.addClass("selecter-element").wrap(g).after(b);var y=t.parent(".selecter"),k=e.extend({$select:t,$allOptions:i,$options:c,$selecter:y,$selected:y.find(".selecter-selected"),$itemsWrapper:y.find(".selecter-options"),index:-1,guid:C++},s);r(k),k.multiple||m(d,k),void 0!==e.fn.scroller&&k.$itemsWrapper.scroller(),k.$selecter.on("touchstart.selecter",".selecter-selected",k,a).on("click.selecter",".selecter-selected",k,n).on("click.selecter",".selecter-item",k,u).on("close.selecter",k,p).data("selecter",k),k.$select.on("change.selecter",k,f),q||(k.$selecter.on("focusin.selecter",k,v).on("blur.selecter",k,$),k.$select.on("focusin.selecter",k,function(e){e.data.$selecter.trigger("focus")}))}}function r(t){for(var s="",l=t.links?"a":"span",r=0,a=t.$allOptions.length;r<a;r++){var o=t.$allOptions.eq(r);if("OPTGROUP"===o[0].tagName)s+='<span class="selecter-group',o.is(":disabled")&&(s+=" disabled"),s+='">'+o.attr("label")+"</span>";else{var i=o.val();o.attr("value")||o.attr("value",i),s+="<"+l+' class="selecter-item',o.hasClass("selecter-placeholder")&&(s+=" placeholder"),o.is(":selected")&&(s+=" selected"),o.is(":disabled")&&(s+=" disabled"),s+='" ',t.links?s+='href="'+i+'"':s+='data-value="'+i+'"',s+=">"+e("<span></span>").text(x(o.text(),t.trim)).html()+"</"+l+">",0}}t.$itemsWrapper.html(s),t.$items=t.$selecter.find(".selecter-item")}function a(e){e.stopPropagation();var t=e.data;t.touchStartEvent=e.originalEvent,t.touchStartX=t.touchStartEvent.touches[0].clientX,t.touchStartY=t.touchStartEvent.touches[0].clientY,t.$selecter.on("touchmove.selecter",".selecter-selected",t,o).on("touchend.selecter",".selecter-selected",t,i)}function o(e){var t=e.data,s=e.originalEvent;(Math.abs(s.touches[0].clientX-t.touchStartX)>10||Math.abs(s.touches[0].clientY-t.touchStartY)>10)&&t.$selecter.off("touchmove.selecter touchend.selecter")}function i(e){var t=e.data;t.touchStartEvent.preventDefault(),t.$selecter.off("touchmove.selecter touchend.selecter"),n(e)}function n(s){s.preventDefault(),s.stopPropagation();var l=s.data;if(!l.$select.is(":disabled"))if(e(".selecter").not(l.$selecter).trigger("close.selecter",[l]),l.mobile||!q||P)l.$selecter.hasClass("closed")?c(s):l.$selecter.hasClass("open")&&p(s);else{var r=l.$select[0];if(t.document.createEvent){var a=t.document.createEvent("MouseEvents");a.initMouseEvent("mousedown",!1,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}else r.fireEvent&&r.fireEvent("onmousedown")}}function c(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.$selecter.hasClass("open")){var s=t.$selecter.offset(),l=E.outerHeight(),r=t.$itemsWrapper.outerHeight(!0);t.index>=0&&t.$items.eq(t.index).position();s.top+r>l&&t.$selecter.addClass("bottom"),t.$itemsWrapper.show(),t.$selecter.removeClass("closed").addClass("open"),E.on("click.selecter-"+t.guid,":not(.selecter-options)",t,d),b(t)}}function d(t){t.preventDefault(),t.stopPropagation(),0===e(t.currentTarget).parents(".selecter").length&&p(t)}function p(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$selecter.hasClass("open")&&(t.$itemsWrapper.hide(),t.$selecter.removeClass("open bottom").addClass("closed"),E.off(".selecter-"+t.guid))}function u(t){t.preventDefault(),t.stopPropagation();var s=e(this),l=t.data;if(!l.$select.is(":disabled")){if(l.$itemsWrapper.is(":visible")){var r=l.$items.index(s);r!==l.index&&(m(r,l),g(l))}l.multiple||p(t)}}function f(t,s){var l=e(this),r=t.data;s||r.multiple||(m(r.$options.index(r.$options.filter("[value='"+function(e){return"string"==typeof e?e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):e}(l.val())+"']")),r),g(r))}function v(t){t.preventDefault(),t.stopPropagation();var s=t.data;s.$select.is(":disabled")||s.multiple||(s.$selecter.addClass("focus").on("keydown.selecter-"+s.guid,s,h),e(".selecter").not(s.$selecter).trigger("close.selecter",[s]))}function $(e,t,s){e.preventDefault(),e.stopPropagation();var l=e.data;l.$selecter.removeClass("focus").off("keydown.selecter-"+l.guid),l.$selecter.hasClass("open")&&(p(e),m(l.index,l)),g(l)}function h(t){var s=t.data;if(13===t.keyCode)s.$selecter.hasClass("open")&&(p(t),m(s.index,s)),g(s);else if(!(9===t.keyCode||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)){t.preventDefault(),t.stopPropagation();var l=s.$items.length-1,r=s.index<0?0:s.index;if(e.inArray(t.keyCode,k?[38,40,37,39]:[38,40])>-1)(r+=38===t.keyCode||k&&37===t.keyCode?-1:1)<0&&(r=0),r>l&&(r=l);else{var a,o=String.fromCharCode(t.keyCode).toUpperCase();for(a=s.index+1;a<=l;a++)if(s.$options.eq(a).text().charAt(0).toUpperCase()===o){r=a;break}if(r<0||r===s.index)for(a=0;a<=l;a++)if(s.$options.eq(a).text().charAt(0).toUpperCase()===o){r=a;break}}r>=0&&(m(r,s),b(s))}}function m(e,t){var s=t.$items.eq(e),l=s.hasClass("selected");if(!s.hasClass("disabled"))if(t.multiple)l?(t.$options.eq(e).prop("selected",null),s.removeClass("selected")):(t.$options.eq(e).prop("selected",!0),s.addClass("selected"));else if(e>-1&&e<t.$items.length){var r=s.html();s.data("value");t.$selected.html(r).removeClass("placeholder"),t.$items.filter(".selected").removeClass("selected"),t.$select[0].selectedIndex=e,s.addClass("selected"),t.index=e}else""!==t.label&&t.$selected.html(t.label)}function b(t){var s=t.$items.eq(t.index),l=t.index>=0&&!s.hasClass("placeholder")?s.position():{left:0,top:0};void 0!==e.fn.scroller?t.$itemsWrapper.scroller("scroll",t.$itemsWrapper.find(".scroller-content").scrollTop()+l.top,0).scroller("reset"):t.$itemsWrapper.scrollTop(t.$itemsWrapper.scrollTop()+l.top)}function g(e){e.links?function(e){var s=e.$select.val();e.external?t.open(s):t.location.href=s}(e):(e.callback.call(e.$selecter,e.$select.val(),e.index),e.$select.trigger("change",[!0]))}function x(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}var C=0,y=t.navigator.userAgent||t.navigator.vendor||t.opera,k=/Firefox/i.test(y),q=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(y),P=k&&q,E=null,W={callback:e.noop,cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},w={defaults:function(t){return W=e.extend(W,t||{}),e(this)},disable:function(t){return e(this).each(function(s,l){var r=e(l).parent(".selecter").data("selecter");if(r)if(void 0!==t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).addClass("disabled"),r.$options.eq(a).prop("disabled",!0)}else r.$selecter.hasClass("open")&&r.$selecter.find(".selecter-selected").trigger("click.selecter"),r.$selecter.addClass("disabled"),r.$select.prop("disabled",!0)})},destroy:function(){return e(this).each(function(t,s){var l=e(s).parent(".selecter").data("selecter");l&&(l.$selecter.hasClass("open")&&l.$selecter.find(".selecter-selected").trigger("click.selecter"),void 0!==e.fn.scroller&&l.$selecter.find(".selecter-options").scroller("destroy"),l.$select[0].tabIndex=l.tabIndex,l.$select.find(".selecter-placeholder").remove(),l.$selected.remove(),l.$itemsWrapper.remove(),l.$selecter.off(".selecter"),l.$select.off(".selecter").removeClass("selecter-element").show().unwrap())})},enable:function(t){return e(this).each(function(s,l){var r=e(l).parent(".selecter").data("selecter");if(r)if(void 0!==t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).removeClass("disabled"),r.$options.eq(a).prop("disabled",!1)}else r.$selecter.removeClass("disabled"),r.$select.prop("disabled",!1)})},refresh:function(){return w.update.apply(e(this))},update:function(){return e(this).each(function(t,s){var l=e(s).parent(".selecter").data("selecter");if(l){var a=l.index;l.$allOptions=l.$select.find("option, optgroup"),l.$options=l.$allOptions.filter("option"),l.index=-1,a=l.$options.index(l.$options.filter(":selected")),r(l),l.multiple||m(a,l)}})}};e.fn.selecter=function(e){return w[e]?w[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:s.apply(this,arguments)},e.selecter=function(e){"defaults"===e&&w.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);